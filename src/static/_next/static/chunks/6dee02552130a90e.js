(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73897,e=>{"use strict";let t=(0,e.i(71225).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],73897)},24881,e=>{"use strict";let t=(0,e.i(71225).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],24881)},52365,e=>{"use strict";let t=(0,e.i(71225).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],52365)},70197,e=>{"use strict";let t=(0,e.i(71225).default)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);e.s(["Loader",()=>t],70197)},93767,e=>{"use strict";let t=(0,e.i(71225).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["default",()=>t])},47687,e=>{"use strict";var t=e.i(81839),r=e.i(74258);function n({className:e,type:n,...a}){return(0,t.jsx)("input",{type:n,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}e.s(["Input",()=>n])},56638,e=>{"use strict";let t=e.i(48665).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8080";async function r(e,r){let n=`${t}${e}`,a=await fetch(n,{headers:{"Content-Type":"application/json",...r?.headers},...r});if(!a.ok)throw Error((await a.json().catch(()=>({}))).detail||`API error: ${a.status}`);return a.json()}e.s(["crawlerApi",0,{analyze:e=>r("/api/scenario/analyze",{method:"POST",body:JSON.stringify(e)}),save:e=>r("/api/scenarios",{method:"POST",body:JSON.stringify(e)})},"personaExecutionApi",0,{run:e=>r(`/api/persona/run/${e}`,{method:"POST"}),getStatus:e=>r(`/api/persona/run/${e}/status`),acknowledgeCompletion:e=>r(`/api/persona/run/${e}`,{method:"DELETE"})},"personaRecordsApi",0,{list:e=>{let t=new URLSearchParams;e?.configId&&t.append("config_id",e.configId),e?.personaType&&t.append("persona_type",e.personaType),e?.reportId&&t.append("report_id",e.reportId),e?.status&&t.append("status",e.status),e?.platform&&t.append("platform",e.platform),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());let n=t.toString()?`?${t.toString()}`:"";return r(`/api/persona-runs${n}`)},get:e=>r(`/api/persona-runs/${e}`),create:e=>r("/api/persona-runs",{method:"POST",body:JSON.stringify(e)})},"reportApi",0,{list:()=>r("/api/reports/list"),getAggregate:(e,t,n)=>{let a=new URLSearchParams;e&&"all"!==e&&a.append("report_id",e),n?.scenario&&"all"!==n.scenario&&a.append("config_id",n.scenario),t&&"compact"!==t&&a.append("mode",t),n?.persona&&"all"!==n.persona&&a.append("persona",n.persona),n?.status&&"all"!==n.status&&a.append("status",n.status),n?.platform&&"all"!==n.platform&&a.append("platform",n.platform);let s=a.toString()?`?${a.toString()}`:"";return r(`/api/reports/aggregate${s}`)},getRuns:(e,t)=>{let n=new URLSearchParams;t?.persona&&"all"!==t.persona&&n.append("persona",t.persona),t?.status&&"all"!==t.status&&n.append("status",t.status),t?.platform&&"all"!==t.platform&&n.append("platform",t.platform);let a=n.toString()?`?${n.toString()}`:"";return r(`/api/reports/${e}/runs${a}`)},getFriction:(e,t)=>{let n=new URLSearchParams;e&&"all"!==e&&n.append("report_id",e),t&&"all"!==t&&n.append("config_id",t);let a=n.toString()?`?${n.toString()}`:"";return r(`/api/reports/friction${a}`)}},"scenarioApi",0,{list:()=>r("/api/scenarios"),get:e=>r(`/api/scenarios/${e}`),create:e=>r("/api/scenarios",{method:"POST",body:JSON.stringify(e)}),updateTasks:(e,t)=>r(`/api/scenario/${e}/tasks`,{method:"PATCH",body:JSON.stringify({selected_task_numbers:t})}),updateTasksFull:(e,t,n)=>r(`/api/scenario/${e}/tasks`,{method:"PUT",body:JSON.stringify({tasks:t,selected_task_numbers:n})}),delete:e=>r(`/api/scenarios/${e}`,{method:"DELETE"}),getPersonas:()=>r("/api/scenario/personas"),generateMoreTasks:(e,t)=>r(`/api/scenario/${e}/generate-tasks`,{method:"POST",body:JSON.stringify(t)})},"systemConfigApi",0,{get:()=>r("/api/system-config"),update:e=>r("/api/system-config",{method:"PUT",body:JSON.stringify(e)})}])},92420,e=>{"use strict";let t=(0,e.i(71225).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],92420)},40310,e=>{"use strict";var t=e.i(81839),r=e.i(5368),n=e.i(81089),a=e.i(74258);let s=(0,n.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:n,asChild:o=!1,...i}){let l=o?r.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,a.cn)(s({variant:n}),e),...i})}e.s(["Badge",()=>o])},23726,e=>{"use strict";var t=e.i(45833),r=e.i(70119),n=e.i(24360),a=e.i(39938),s=e.i(13054),o=e.i(86089),i=e.i(30361),l=e.i(72448),d=e.i(40189),c=e.i(72435),u=e=>{var r;let a,s,{present:o,children:i}=e,l=function(e){var r,n;let[a,s]=t.useState(),o=t.useRef(null),i=t.useRef(e),l=t.useRef("none"),[d,u]=(r=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>n[e][t]??e,r));return t.useEffect(()=>{let e=p(o.current);l.current="mounted"===d?e:"none"},[d]),(0,c.useLayoutEffect)(()=>{let t=o.current,r=i.current;if(r!==e){let n=l.current,a=p(t);e?u("MOUNT"):"none"===a||t?.display==="none"?u("UNMOUNT"):r&&n!==a?u("ANIMATION_OUT"):u("UNMOUNT"),i.current=e}},[e,u]),(0,c.useLayoutEffect)(()=>{if(a){let e,t=a.ownerDocument.defaultView??window,r=r=>{let n=p(o.current).includes(CSS.escape(r.animationName));if(r.target===a&&n&&(u("ANIMATION_END"),!i.current)){let r=a.style.animationFillMode;a.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=r)})}},n=e=>{e.target===a&&(l.current=p(o.current))};return a.addEventListener("animationstart",n),a.addEventListener("animationcancel",r),a.addEventListener("animationend",r),()=>{t.clearTimeout(e),a.removeEventListener("animationstart",n),a.removeEventListener("animationcancel",r),a.removeEventListener("animationend",r)}}u("ANIMATION_END")},[a,u]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback(e=>{o.current=e?getComputedStyle(e):null,s(e)},[])}}(o),d="function"==typeof i?i({present:l.isPresent}):t.Children.only(i),u=(0,n.useComposedRefs)(l.ref,(r=d,(s=(a=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?r.ref:(s=(a=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?r.props.ref:r.props.ref||r.ref));return"function"==typeof i||l.isPresent?t.cloneElement(d,{ref:u}):null};function p(e){return e?.animationName||"none"}u.displayName="Presence";var f=e.i(96806),m=e.i(26117),g=e.i(46299),x=e.i(79567),h=e.i(54437),y=e.i(81839),v="Dialog",[b,j]=(0,a.createContextScope)(v),[N,w]=b(v),C=e=>{let{__scopeDialog:r,children:n,open:a,defaultOpen:i,onOpenChange:l,modal:d=!0}=e,c=t.useRef(null),u=t.useRef(null),[p,f]=(0,o.useControllableState)({prop:a,defaultProp:i??!1,onChange:l,caller:v});return(0,y.jsx)(N,{scope:r,triggerRef:c,contentRef:u,contentId:(0,s.useId)(),titleId:(0,s.useId)(),descriptionId:(0,s.useId)(),open:p,onOpenChange:f,onOpenToggle:t.useCallback(()=>f(e=>!e),[f]),modal:d,children:n})};C.displayName=v;var T="DialogTrigger",E=t.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,o=w(T,a),i=(0,n.useComposedRefs)(t,o.triggerRef);return(0,y.jsx)(f.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":W(o.open),...s,ref:i,onClick:(0,r.composeEventHandlers)(e.onClick,o.onOpenToggle)})});E.displayName=T;var R="DialogPortal",[k,P]=b(R,{forceMount:void 0}),S=e=>{let{__scopeDialog:r,forceMount:n,children:a,container:s}=e,o=w(R,r);return(0,y.jsx)(k,{scope:r,forceMount:n,children:t.Children.map(a,e=>(0,y.jsx)(u,{present:n||o.open,children:(0,y.jsx)(d.Portal,{asChild:!0,container:s,children:e})}))})};S.displayName=R;var D="DialogOverlay",O=t.forwardRef((e,t)=>{let r=P(D,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=w(D,e.__scopeDialog);return s.modal?(0,y.jsx)(u,{present:n||s.open,children:(0,y.jsx)(I,{...a,ref:t})}):null});O.displayName=D;var _=(0,h.createSlot)("DialogOverlay.RemoveScroll"),I=t.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=w(D,r);return(0,y.jsx)(g.RemoveScroll,{as:_,allowPinchZoom:!0,shards:[a.contentRef],children:(0,y.jsx)(f.Primitive.div,{"data-state":W(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),A="DialogContent",M=t.forwardRef((e,t)=>{let r=P(A,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=w(A,e.__scopeDialog);return(0,y.jsx)(u,{present:n||s.open,children:s.modal?(0,y.jsx)(L,{...a,ref:t}):(0,y.jsx)(F,{...a,ref:t})})});M.displayName=A;var L=t.forwardRef((e,a)=>{let s=w(A,e.__scopeDialog),o=t.useRef(null),i=(0,n.useComposedRefs)(a,s.contentRef,o);return t.useEffect(()=>{let e=o.current;if(e)return(0,x.hideOthers)(e)},[]),(0,y.jsx)($,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),F=t.forwardRef((e,r)=>{let n=w(A,e.__scopeDialog),a=t.useRef(!1),s=t.useRef(!1);return(0,y.jsx)($,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||n.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));let r=t.target;n.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),$=t.forwardRef((e,r)=>{let{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:d,...c}=e,u=w(A,a),p=t.useRef(null),f=(0,n.useComposedRefs)(r,p);return(0,m.useFocusGuards)(),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:d,children:(0,y.jsx)(i.DismissableLayer,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":W(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Z,{titleId:u.titleId}),(0,y.jsx)(G,{contentRef:p,descriptionId:u.descriptionId})]})]})}),U="DialogTitle",H=t.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=w(U,r);return(0,y.jsx)(f.Primitive.h2,{id:a.titleId,...n,ref:t})});H.displayName=U;var B="DialogDescription",z=t.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=w(B,r);return(0,y.jsx)(f.Primitive.p,{id:a.descriptionId,...n,ref:t})});z.displayName=B;var q="DialogClose",J=t.forwardRef((e,t)=>{let{__scopeDialog:n,...a}=e,s=w(q,n);return(0,y.jsx)(f.Primitive.button,{type:"button",...a,ref:t,onClick:(0,r.composeEventHandlers)(e.onClick,()=>s.onOpenChange(!1))})});function W(e){return e?"open":"closed"}J.displayName=q;var X="DialogTitleWarning",[V,K]=(0,a.createContext)(X,{contentName:A,titleName:U,docsSlug:"dialog"}),Z=({titleId:e})=>{let r=K(X),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return t.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},G=({contentRef:e,descriptionId:r})=>{let n=K("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${n.contentName}}.`;return t.useEffect(()=>{let t=e.current?.getAttribute("aria-describedby");r&&t&&(document.getElementById(r)||console.warn(a))},[a,e,r]),null};e.s(["Close",()=>J,"Content",()=>M,"Description",()=>z,"Overlay",()=>O,"Portal",()=>S,"Root",()=>C,"Title",()=>H,"Trigger",()=>E],23726)},82562,e=>{"use strict";var t=e.i(81839),r=e.i(45833),n=e.i(23726),a=e.i(92420),s=e.i(74258);let o=n.Root;n.Trigger;let i=n.Portal;n.Close;let l=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(n.Overlay,{ref:a,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r}));l.displayName=n.Overlay.displayName;let d=r.forwardRef(({className:e,children:r,...o},d)=>(0,t.jsxs)(i,{children:[(0,t.jsx)(l,{}),(0,t.jsxs)(n.Content,{ref:d,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-card p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg rounded-md",e),...o,children:[r,(0,t.jsxs)(n.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-0 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(a.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));d.displayName=n.Content.displayName;let c=({className:e,...r})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...r});c.displayName="DialogHeader";let u=({className:e,...r})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...r});u.displayName="DialogFooter";let p=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(n.Title,{ref:a,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",e),...r}));p.displayName=n.Title.displayName;let f=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(n.Description,{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...r}));f.displayName=n.Description.displayName,e.s(["Dialog",()=>o,"DialogContent",()=>d,"DialogDescription",()=>f,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>p])},59615,e=>{"use strict";var t=e.i(81839),r=e.i(45833),n=e.i(50561),a=e.i(70197),s=e.i(53490),o=e.i(73897),i=e.i(22567),l=e.i(28495),d=e.i(88190),c=e.i(40310),u=e.i(82808),p=e.i(25269),f=e.i(4835),m=e.i(59409),g=e.i(85260),x=e.i(79744),h=e.i(27324),y=e.i(19172),v=e.i(30301),b=e.i(72786),j=e.i(5368),N=e.i(18580),w=r.forwardRef((e,r)=>(0,t.jsx)(b.Primitive.span,{...e,ref:r,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));w.displayName="VisuallyHidden";var[C,T]=(0,m.createContextScope)("Tooltip",[h.createPopperScope]),E=(0,h.createPopperScope)(),R="TooltipProvider",k="tooltip.open",[P,S]=C(R),D=e=>{let{__scopeTooltip:n,delayDuration:a=700,skipDelayDuration:s=300,disableHoverableContent:o=!1,children:i}=e,[l,d]=r.useState(!0),c=r.useRef(!1),u=r.useRef(0);return r.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,t.jsx)(P,{scope:n,isOpenDelayed:l,delayDuration:a,onOpen:r.useCallback(()=>{window.clearTimeout(u.current),d(!1)},[]),onClose:r.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>d(!0),s)},[s]),isPointerInTransitRef:c,onPointerInTransitChange:r.useCallback(e=>{c.current=e},[]),disableHoverableContent:o,children:i})};D.displayName=R;var O="Tooltip",[_,I]=C(O),A=e=>{let{__scopeTooltip:n,children:a,open:s,defaultOpen:o=!1,onOpenChange:i,disableHoverableContent:l,delayDuration:d}=e,c=S(O,e.__scopeTooltip),u=E(n),[p,f]=r.useState(null),m=(0,x.useId)(),g=r.useRef(0),y=l??c.disableHoverableContent,v=d??c.delayDuration,b=r.useRef(!1),[j=!1,w]=(0,N.useControllableState)({prop:s,defaultProp:o,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(k))):c.onClose(),i?.(e)}}),C=r.useMemo(()=>j?b.current?"delayed-open":"instant-open":"closed",[j]),T=r.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,w(!0)},[w]),R=r.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w(!1)},[w]),P=r.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,w(!0),g.current=0},v)},[v,w]);return r.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),(0,t.jsx)(h.Root,{...u,children:(0,t.jsx)(_,{scope:n,contentId:m,open:j,stateAttribute:C,trigger:p,onTriggerChange:f,onTriggerEnter:r.useCallback(()=>{c.isOpenDelayed?P():T()},[c.isOpenDelayed,P,T]),onTriggerLeave:r.useCallback(()=>{y?R():(window.clearTimeout(g.current),g.current=0)},[R,y]),onOpen:T,onClose:R,disableHoverableContent:y,children:a})})};A.displayName=O;var M="TooltipTrigger",L=r.forwardRef((e,n)=>{let{__scopeTooltip:a,...s}=e,o=I(M,a),i=S(M,a),l=E(a),d=r.useRef(null),c=(0,f.useComposedRefs)(n,d,o.onTriggerChange),u=r.useRef(!1),m=r.useRef(!1),g=r.useCallback(()=>u.current=!1,[]);return r.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),(0,t.jsx)(h.Anchor,{asChild:!0,...l,children:(0,t.jsx)(b.Primitive.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...s,ref:c,onPointerMove:(0,p.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(m.current||i.isPointerInTransitRef.current||(o.onTriggerEnter(),m.current=!0))}),onPointerLeave:(0,p.composeEventHandlers)(e.onPointerLeave,()=>{o.onTriggerLeave(),m.current=!1}),onPointerDown:(0,p.composeEventHandlers)(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:(0,p.composeEventHandlers)(e.onFocus,()=>{u.current||o.onOpen()}),onBlur:(0,p.composeEventHandlers)(e.onBlur,o.onClose),onClick:(0,p.composeEventHandlers)(e.onClick,o.onClose)})})});L.displayName=M;var F="TooltipPortal",[$,U]=C(F,{forceMount:void 0}),H=e=>{let{__scopeTooltip:r,forceMount:n,children:a,container:s}=e,o=I(F,r);return(0,t.jsx)($,{scope:r,forceMount:n,children:(0,t.jsx)(v.Presence,{present:n||o.open,children:(0,t.jsx)(y.Portal,{asChild:!0,container:s,children:a})})})};H.displayName=F;var B="TooltipContent",z=r.forwardRef((e,r)=>{let n=U(B,e.__scopeTooltip),{forceMount:a=n.forceMount,side:s="top",...o}=e,i=I(B,e.__scopeTooltip);return(0,t.jsx)(v.Presence,{present:a||i.open,children:i.disableHoverableContent?(0,t.jsx)(X,{side:s,...o,ref:r}):(0,t.jsx)(q,{side:s,...o,ref:r})})}),q=r.forwardRef((e,n)=>{let a=I(B,e.__scopeTooltip),s=S(B,e.__scopeTooltip),o=r.useRef(null),i=(0,f.useComposedRefs)(n,o),[l,d]=r.useState(null),{trigger:c,onClose:u}=a,p=o.current,{onPointerInTransitChange:m}=s,g=r.useCallback(()=>{d(null),m(!1)},[m]),x=r.useCallback((e,t)=>{let r,n=e.currentTarget,a={x:e.clientX,y:e.clientY},s=function(e,t){let r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,a,s)){case s:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw Error("unreachable")}}(a,n.getBoundingClientRect());d(((r=[...function(e,t,r=5){let n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(a,s),...function(e){let{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let n=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x))t.pop();else break}t.push(n)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))r.pop();else break}r.push(n)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),m(!0)},[m]);return r.useEffect(()=>()=>g(),[g]),r.useEffect(()=>{if(c&&p){let e=e=>x(e,p),t=e=>x(e,c);return c.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[c,p,x,g]),r.useEffect(()=>{if(l){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},n=c?.contains(t)||p?.contains(t),a=!function(e,t){let{x:r,y:n}=e,a=!1;for(let e=0,s=t.length-1;e<t.length;s=e++){let o=t[e].x,i=t[e].y,l=t[s].x,d=t[s].y;i>n!=d>n&&r<(l-o)*(n-i)/(d-i)+o&&(a=!a)}return a}(r,l);n?g():a&&(g(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,p,l,u,g]),(0,t.jsx)(X,{...e,ref:i})}),[J,W]=C(O,{isInside:!1}),X=r.forwardRef((e,n)=>{let{__scopeTooltip:a,children:s,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:l,...d}=e,c=I(B,a),u=E(a),{onClose:p}=c;return r.useEffect(()=>(document.addEventListener(k,p),()=>document.removeEventListener(k,p)),[p]),r.useEffect(()=>{if(c.trigger){let e=e=>{let t=e.target;t?.contains(c.trigger)&&p()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,p]),(0,t.jsx)(g.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:p,children:(0,t.jsxs)(h.Content,{"data-state":c.stateAttribute,...u,...d,ref:n,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,t.jsx)(j.Slottable,{children:s}),(0,t.jsx)(J,{scope:a,isInside:!0,children:(0,t.jsx)(w,{id:c.contentId,role:"tooltip",children:o||s})})]})})});z.displayName=B;var V="TooltipArrow",K=r.forwardRef((e,r)=>{let{__scopeTooltip:n,...a}=e,s=E(n);return W(V,n).isInside?null:(0,t.jsx)(h.Arrow,{...s,...a,ref:r})});K.displayName=V;var Z=e.i(74258);function G({delayDuration:e=0,...r}){return(0,t.jsx)(D,{"data-slot":"tooltip-provider",delayDuration:e,...r})}function Y({...e}){return(0,t.jsx)(G,{children:(0,t.jsx)(A,{"data-slot":"tooltip",...e})})}function Q({...e}){return(0,t.jsx)(L,{"data-slot":"tooltip-trigger",...e})}function ee({className:e,sideOffset:r=0,children:n,...a}){return(0,t.jsx)(H,{children:(0,t.jsxs)(z,{"data-slot":"tooltip-content",sideOffset:r,className:(0,Z.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...a,children:[n,(0,t.jsx)(K,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var et=e.i(84090),er=e.i(19569);function en({runs:e}){let[n,a]=(0,r.useState)(null);return(0,t.jsxs)(G,{children:[(0,t.jsx)(d.Card,{className:"border-border bg-card",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border bg-card/50",children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-medium text-muted-foreground",children:"Persona"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-medium text-muted-foreground",children:"Platform"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-medium text-muted-foreground",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-medium text-muted-foreground",children:"Progress"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-medium text-muted-foreground",children:"Duration"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-medium text-muted-foreground",children:"Timestamp"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-medium text-muted-foreground"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:e.map(e=>{var r,n;let d,p,f;return(0,t.jsxs)("tr",{className:"hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>a(e),children:[(0,t.jsx)("td",{className:"px-6 py-4 font-medium",children:(0,er.getPersonaLabel)(e.persona_type)}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)(c.Badge,{variant:"outline",className:"capitalize",children:e.platform})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(r=e.is_done,(n=e.error_type)&&""!==n?(0,t.jsx)(o.AlertCircle,{className:"w-4 h-4 text-red-500"}):r?(0,t.jsx)(i.CheckCircle2,{className:"w-4 h-4 text-emerald-500"}):(0,t.jsx)(l.Clock,{className:"w-4 h-4 text-blue-500 animate-spin"})),(d=e.error_type&&""!==e.error_type,p=e.is_done&&e.judgement_data?.verdict===!0,f=e.is_done&&e.judgement_data?.verdict===!1,d?(0,t.jsxs)(Y,{children:[(0,t.jsx)(Q,{asChild:!0,children:(0,t.jsx)(c.Badge,{className:"bg-red-500/20 text-red-400 border-red-500/30 hover:bg-red-500/30 cursor-help",children:"Error"})}),(0,t.jsx)(ee,{children:(0,t.jsx)("p",{children:"Technical error occurred during execution"})})]}):p?(0,t.jsxs)(Y,{children:[(0,t.jsx)(Q,{asChild:!0,children:(0,t.jsx)(c.Badge,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30 hover:bg-emerald-500/30 cursor-help",children:"Success"})}),(0,t.jsx)(ee,{children:(0,t.jsx)("p",{children:"Agent successfully completed its goal"})})]}):f?(0,t.jsxs)(Y,{children:[(0,t.jsx)(Q,{asChild:!0,children:(0,t.jsx)(c.Badge,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30 hover:bg-amber-500/30 cursor-help",children:"Goal Not Met"})}),(0,t.jsx)(ee,{children:(0,t.jsx)("p",{children:"Agent completed but did not achieve its goal"})})]}):e.is_done?(0,t.jsx)(c.Badge,{variant:"secondary",children:"Unknown"}):(0,t.jsxs)(Y,{children:[(0,t.jsx)(Q,{asChild:!0,children:(0,t.jsx)(c.Badge,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30 hover:bg-blue-500/30 cursor-help",children:"In Progress"})}),(0,t.jsx)(ee,{children:(0,t.jsx)("p",{children:"Agent is still running"})})]}))]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-24 h-2 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${e.total_steps>0?e.steps_completed/e.total_steps*100:0}%`}})}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.steps_completed,"/",e.total_steps]})]})}),(0,t.jsxs)("td",{className:"px-6 py-4 text-muted-foreground",children:[e.duration_seconds?Math.round(10*e.duration_seconds)/10:0,"s"]}),(0,t.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-xs",children:new Date(e.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)(u.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:t=>{t.stopPropagation(),a(e)},children:(0,t.jsx)(s.ChevronDown,{className:"w-4 h-4"})})})]},e.id)})})]})})}),n&&(0,t.jsx)(et.RunDetailsModal,{run:n,onClose:()=>a(null)})]})}var ea=e.i(56638),es=e.i(6738);function eo(){let{scenarioFilter:e,reportFilter:s,statusFilter:o,personaFilter:i,platformFilter:l}=(0,es.useFilterContext)(),[c,u]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[x,h]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[b,j]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{(async()=>{try{v(!0);let[e,t,r]=await Promise.all([ea.scenarioApi.list(),ea.reportApi.list(),ea.scenarioApi.getPersonas()]);u(e),g(t),h(r.personas.sort())}catch(e){j(e instanceof Error?e.message:"Failed to fetch data")}finally{v(!1)}})()},[]),(0,r.useEffect)(()=>{"all"===e?f([]):(async()=>{try{let t={limit:1e3};"all"!==e&&(t.configId=e),"all"!==s&&(t.reportId=s),"all"!==o&&(t.status=o),"all"!==i&&(t.personaType=i),"all"!==l&&(t.platform=l),console.log("[RunsDashboard] Fetching runs with filters:",t);let r=[ea.personaRecordsApi.list(t)];"all"!==s&&w(!0);let n=await Promise.all(r);f(n[0])}catch(e){console.error("[RunsDashboard] Error fetching runs:",e),j(e instanceof Error?e.message:"Failed to fetch runs")}finally{"all"!==s&&w(!1)}})()},[e,s,o,i,l]),y)?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(a.Loader,{className:"w-6 h-6 animate-spin text-muted-foreground"}),(0,t.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading agent runs..."})]}):b?(0,t.jsx)("div",{className:"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-red-800 dark:text-red-200",children:["Error: ",b]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(n.RunFilters,{scenarios:c,reports:m,availablePersonas:x,showPlatformFilter:!0,showDateFilter:!1}),"all"===e?(0,t.jsx)(d.Card,{className:"p-12",children:(0,t.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,t.jsx)("p",{className:"text-lg mb-2",children:"Select a scenario to view runs"}),(0,t.jsxs)("p",{className:"text-sm",children:[c.length," scenarios available"]})]})}):(0,t.jsxs)(t.Fragment,{children:["all"!==s&&(0,t.jsx)("div",{className:"space-y-6"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",p.length," runs"]}),p.length>0?(0,t.jsx)(en,{runs:p}):(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No agent runs found. Try adjusting your filters."})]})]})}e.s(["RunsDashboard",()=>eo],59615)}]);